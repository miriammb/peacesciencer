<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Run Times (and Tips) for Various Functions in `{peacesciencer}` • peacesciencer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Run Times (and Tips) for Various Functions in `{peacesciencer}`">
<meta property="og:description" content="peacesciencer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peacesciencer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">What’s Included?</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/coerce-dispute-year-dyad-year.html">How `{peacesciencer}` Coerces Dispute-Year Data into Dyad-Year Data</a>
    </li>
    <li>
      <a href="../articles/create-different-kinds-of-data-in-peacesciencer.html">Create Different Kinds of Data in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/democracy.html">Fixing Unnecessary Missingness in Democracy Scores in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/joins.html">A Discussion of Various Joins in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/parlor-tricks.html">Various Parlor Tricks in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/state-systems.html">A Discussion of Correlates of War and Gleditsch-Ward Systems and `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/times.html">Run Times (and Tips) for Various Functions in `{peacesciencer}`</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    User Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../ms.html">HTML</a>
    </li>
    <li>
      <a href="../ms.pdf">PDF</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/svmiller/peacesciencer/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="times_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="times_files/kePrint-0.0.1/kePrint.js"></script><link href="times_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Run Times (and Tips) for Various Functions in <code>{peacesciencer}</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/svmiller/peacesciencer/blob/master/vignettes/times.Rmd"><code>vignettes/times.Rmd</code></a></small>
      <div class="hidden name"><code>times.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</span>
<span class="co">#&gt; ✓ ggplot2 3.3.5     ✓ purrr   0.3.4</span>
<span class="co">#&gt; ✓ tibble  3.1.4     ✓ dplyr   1.0.7</span>
<span class="co">#&gt; ✓ tidyr   1.1.4     ✓ stringr 1.4.0</span>
<span class="co">#&gt; ✓ readr   2.0.2     ✓ forcats 0.5.1</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a></span><span class="op">)</span>
<span class="co">#&gt; {peacesciencer} includes additional remote data for separate download. Please type ?download_extdata() for more information.</span>
<span class="co">#&gt; This message disappears on load when these data are downloaded and in the package's `extdata` directory.</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'kableExtra'</span>
<span class="co">#&gt; The following object is masked from 'package:dplyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     group_rows</span>

<span class="va">create_bench</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"~/Dropbox/projects/peacesciencer/data-raw/times/create_bench.rds"</span><span class="op">)</span>
<span class="va">state_bench</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"~/Dropbox/projects/peacesciencer/data-raw/times/state_bench.rds"</span><span class="op">)</span>
<span class="va">dyad_bench</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"~/Dropbox/projects/peacesciencer/data-raw/times/dyad_bench.rds"</span><span class="op">)</span></code></pre></div>
<p>I had time around watching the UEFA Euro 2020 action to evaluate the expected run times in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>. The TV is in the living room and that meant I can have my laptop open for this. My laptop is a more appropriate computer for doing this because <a href="http://svmiller.com/blog/2019/07/notes-to-self-new-linux-installation-r-ubuntu/">my desktop is comically overpowered</a> and may provide some unrealistic expectations (for me) about how other users might experience <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p><a href="https://github.com/svmiller/peacesciencer/tree/master/data-raw/times">A subdirectory on the project’s Github</a> shows what I did here. I grouped the functions in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> into two types, with one type have two subcomponents. The first type creates base data. These are <code><a href="../reference/create_statedays.html">create_statedays()</a></code>, <code><a href="../reference/create_stateyears.html">create_stateyears()</a></code>, and <code><a href="../reference/create_dyadyears.html">create_dyadyears()</a></code>. The second type broadly changes data—either adding to it or subtracting from it. For convenience sake, it’s good to think of this family of <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> functions as applicable to state-year or dyad-year data. With that in mind, I used the <a href="https://github.com/joshuaulrich/microbenchmark/">microbenchmark</a> package to run each of the relevant functions 100 times—across those two types (and three overall groups)—to see how long these functions can take for a user with a computer similar to mine. The times are calculated as nanoseconds and the benchmarking happened while I was also fiddling with other things, perusing the internet, and watching UEFA Euro 2020. Thus, what I offer here is illustrative, but still useful.</p>
<p>A user can see the associated R Markdown file for this vignette to see the code for processing/formatting, so I want to focus on just the substance. Here is a summary table of the run times for the <code>create_*</code> functions from this exercise. Note that these functions were executed with the default options, so these are all Correlates of War state system data from 1816 to the most recently concluded calendar year.</p>
<table class="table table table-striped">
<caption>
A Summary of Run Times Across 100 Trials for Data-Creating Functions in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>
</caption>
<thead><tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:center;">
Average
</th>
<th style="text-align:center;">
Median
</th>
<th style="text-align:center;">
95% Interval
</th>
<th style="text-align:center;">
Minimum
</th>
<th style="text-align:center;">
Maximum
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-family: monospace;">
create_statedays()
</td>
<td style="text-align:center;">
0.963
</td>
<td style="text-align:center;">
0.948
</td>
<td style="text-align:center;">
[0.43, 1.791]
</td>
<td style="text-align:center;">
0.370
</td>
<td style="text-align:center;">
2.260
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
create_stateyears()
</td>
<td style="text-align:center;">
0.039
</td>
<td style="text-align:center;">
0.035
</td>
<td style="text-align:center;">
[0.027, 0.066]
</td>
<td style="text-align:center;">
0.026
</td>
<td style="text-align:center;">
0.199
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
create_dyadyears()
</td>
<td style="text-align:center;">
4.757
</td>
<td style="text-align:center;">
4.649
</td>
<td style="text-align:center;">
[3.565, 6.46]
</td>
<td style="text-align:center;">
3.437
</td>
<td style="text-align:center;">
7.167
</td>
</tr>
</tbody>
</table>
<p>The simulations show that creating dyad-years is by far the most time-intensive data-creating function in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>. This is not terribly surprising. The code for <code><a href="../reference/create_dyadyears.html">create_dyadyears()</a></code> is transforming the raw Correlates of War (or Gleditsch-Ward) state system data. The nature of this transformation is invariably going to take more time than state-year or even state-day summaries of the data. That said, about 4-5 seconds for creating these data is pretty damn good, all things considered.</p>
<p>These are the run times for the functions that add to state-year data, ranged from most time-consuming to least time-consuming.</p>
<table class="table table table-striped">
<caption>
A Summary of Run Times Across 100 Trials for State-Year Data-Changing Functions in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>
</caption>
<thead><tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:center;">
Average
</th>
<th style="text-align:center;">
Median
</th>
<th style="text-align:center;">
95% Interval
</th>
<th style="text-align:center;">
Minimum
</th>
<th style="text-align:center;">
Maximum
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-family: monospace;">
add_archigos()
</td>
<td style="text-align:center;">
6.291
</td>
<td style="text-align:center;">
6.185
</td>
<td style="text-align:center;">
[5.25, 7.726]
</td>
<td style="text-align:center;">
4.948
</td>
<td style="text-align:center;">
8.195
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_creg_fractionalization() [G-W]
</td>
<td style="text-align:center;">
3.389
</td>
<td style="text-align:center;">
3.313
</td>
<td style="text-align:center;">
[2.93, 4.052]
</td>
<td style="text-align:center;">
2.817
</td>
<td style="text-align:center;">
4.229
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_creg_fractionalization() [CoW]
</td>
<td style="text-align:center;">
3.350
</td>
<td style="text-align:center;">
3.284
</td>
<td style="text-align:center;">
[2.919, 4.137]
</td>
<td style="text-align:center;">
2.845
</td>
<td style="text-align:center;">
4.561
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_capital_distance()
</td>
<td style="text-align:center;">
2.310
</td>
<td style="text-align:center;">
2.256
</td>
<td style="text-align:center;">
[1.975, 2.86]
</td>
<td style="text-align:center;">
1.936
</td>
<td style="text-align:center;">
3.234
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_strategic_rivalries()
</td>
<td style="text-align:center;">
2.254
</td>
<td style="text-align:center;">
2.199
</td>
<td style="text-align:center;">
[2.01, 2.717]
</td>
<td style="text-align:center;">
1.940
</td>
<td style="text-align:center;">
3.123
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_wars(type=“intra”)
</td>
<td style="text-align:center;">
0.615
</td>
<td style="text-align:center;">
0.581
</td>
<td style="text-align:center;">
[0.514, 0.917]
</td>
<td style="text-align:center;">
0.508
</td>
<td style="text-align:center;">
0.972
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_contiguity()
</td>
<td style="text-align:center;">
0.391
</td>
<td style="text-align:center;">
0.373
</td>
<td style="text-align:center;">
[0.334, 0.614]
</td>
<td style="text-align:center;">
0.318
</td>
<td style="text-align:center;">
0.798
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_gwcode_to_cow()
</td>
<td style="text-align:center;">
0.379
</td>
<td style="text-align:center;">
0.353
</td>
<td style="text-align:center;">
[0.309, 0.633]
</td>
<td style="text-align:center;">
0.303
</td>
<td style="text-align:center;">
0.691
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_ucdp_acd()
</td>
<td style="text-align:center;">
0.153
</td>
<td style="text-align:center;">
0.145
</td>
<td style="text-align:center;">
[0.129, 0.205]
</td>
<td style="text-align:center;">
0.128
</td>
<td style="text-align:center;">
0.407
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_minimum_distance() [G-W]
</td>
<td style="text-align:center;">
0.151
</td>
<td style="text-align:center;">
0.142
</td>
<td style="text-align:center;">
[0.119, 0.214]
</td>
<td style="text-align:center;">
0.113
</td>
<td style="text-align:center;">
0.572
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_minimum_distance() [CoW]
</td>
<td style="text-align:center;">
0.142
</td>
<td style="text-align:center;">
0.136
</td>
<td style="text-align:center;">
[0.117, 0.187]
</td>
<td style="text-align:center;">
0.108
</td>
<td style="text-align:center;">
0.433
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_peace_years() [CoW Intra-State Wars]
</td>
<td style="text-align:center;">
0.119
</td>
<td style="text-align:center;">
0.114
</td>
<td style="text-align:center;">
[0.098, 0.147]
</td>
<td style="text-align:center;">
0.097
</td>
<td style="text-align:center;">
0.398
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_peace_years() [(G-W) UCDP ACD]
</td>
<td style="text-align:center;">
0.119
</td>
<td style="text-align:center;">
0.114
</td>
<td style="text-align:center;">
[0.096, 0.181]
</td>
<td style="text-align:center;">
0.092
</td>
<td style="text-align:center;">
0.250
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_majors()
</td>
<td style="text-align:center;">
0.027
</td>
<td style="text-align:center;">
0.025
</td>
<td style="text-align:center;">
[0.021, 0.043]
</td>
<td style="text-align:center;">
0.020
</td>
<td style="text-align:center;">
0.045
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_ccode_to_gw()
</td>
<td style="text-align:center;">
0.010
</td>
<td style="text-align:center;">
0.009
</td>
<td style="text-align:center;">
[0.008, 0.015]
</td>
<td style="text-align:center;">
0.008
</td>
<td style="text-align:center;">
0.018
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_democracy() [G-W]
</td>
<td style="text-align:center;">
0.010
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
[0.006, 0.012]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.302
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_sdp_gdp() [G-W]
</td>
<td style="text-align:center;">
0.009
</td>
<td style="text-align:center;">
0.008
</td>
<td style="text-align:center;">
[0.006, 0.014]
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
0.026
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_sdp_gdp() [CoW]
</td>
<td style="text-align:center;">
0.008
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
[0.006, 0.013]
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
0.015
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_trade()
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
[0.005, 0.011]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.012
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_democracy() [CoW]
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
[0.005, 0.012]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.019
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_igos()
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
[0.005, 0.01]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.020
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_nmc()
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
[0.005, 0.015]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.021
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_rugged_terrain() [G-W]
</td>
<td style="text-align:center;">
0.007
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
[0.005, 0.013]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.022
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_rugged_terrain() [CoW]
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
0.006
</td>
<td style="text-align:center;">
[0.005, 0.01]
</td>
<td style="text-align:center;">
0.005
</td>
<td style="text-align:center;">
0.014
</td>
</tr>
</tbody>
</table>
<p>There are five functions for which the average execution time is over a second. Knowing what I know about how I wrote these functions, a few of them make some sense.<code><a href="../reference/add_archigos.html">add_archigos()</a></code> takes the most time by far—an average of over six seconds—largely because 1) it needs to rowwise-transform a subset of the raw data to extend dates into leader-days before calculating the relevant variables as a group-by mutate before doing the most time-consuming function I sometimes bury into these functions: a group-by slice for eliminating duplicates. <code><a href="../reference/add_creg_fractionalization.html">add_creg_fractionalization()</a></code> has this same group-by slice largely because its state codes are not quite Correlates of War and note quite Gleditsch-Ward, for which a group-by slice is one of my go-tos for eliminating grouped duplicates. <code><a href="../reference/add_capital_distance.html">add_capital_distance()</a></code> is a bit time-consuming because it’s doing on-the-fly “as the crow flies” distance estimates between state capitals using the provided latitude/longitude coordinates. <code><a href="../reference/add_strategic_rivalries.html">add_strategic_rivalries()</a></code> doesn’t have any of these, but it has a lot of buried if-elses for how a user may want to calculate the presence of a rivalry type at the state-year.</p>
<p>The dyad-year run times are a little bit more interesting and will merit some further explanation. Most of these are a little time-consuming because of the reasons mentioned above (e.g. group-by slices, as in the <code><a href="../reference/add_creg_fractionalization.html">add_creg_fractionalization()</a></code> and <code><a href="../reference/add_archigos.html">add_archigos()</a></code> cases). The peace-year calculations are a little time-consuming, but ultimately have a straightforward explanation.</p>
<table class="table table table-striped">
<caption>
A Summary of Run Times Across 100 Trials for Dyad-Year Data-Changing Functions in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>
</caption>
<thead><tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:center;">
Average
</th>
<th style="text-align:center;">
Median
</th>
<th style="text-align:center;">
95% Interval
</th>
<th style="text-align:center;">
Minimum
</th>
<th style="text-align:center;">
Maximum
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-family: monospace;">
add_peace_years() [CoW-MID]
</td>
<td style="text-align:center;">
12.913
</td>
<td style="text-align:center;">
12.566
</td>
<td style="text-align:center;">
[11.574, 15.679]
</td>
<td style="text-align:center;">
11.297
</td>
<td style="text-align:center;">
15.982
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_peace_years() [GML MID]
</td>
<td style="text-align:center;">
12.319
</td>
<td style="text-align:center;">
11.967
</td>
<td style="text-align:center;">
[11.057, 14.449]
</td>
<td style="text-align:center;">
10.914
</td>
<td style="text-align:center;">
16.352
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_archigos()
</td>
<td style="text-align:center;">
5.994
</td>
<td style="text-align:center;">
5.837
</td>
<td style="text-align:center;">
[5.068, 7.524]
</td>
<td style="text-align:center;">
4.904
</td>
<td style="text-align:center;">
7.815
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_creg_fractionalization() [CoW]
</td>
<td style="text-align:center;">
3.588
</td>
<td style="text-align:center;">
3.430
</td>
<td style="text-align:center;">
[3.143, 4.454]
</td>
<td style="text-align:center;">
3.068
</td>
<td style="text-align:center;">
4.911
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_creg_fractionalization() [G-W]
</td>
<td style="text-align:center;">
3.548
</td>
<td style="text-align:center;">
3.433
</td>
<td style="text-align:center;">
[3.143, 4.447]
</td>
<td style="text-align:center;">
3.043
</td>
<td style="text-align:center;">
4.582
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
filter_prd() [+ add_contiguity() + add_cow_majors()]
</td>
<td style="text-align:center;">
2.868
</td>
<td style="text-align:center;">
2.840
</td>
<td style="text-align:center;">
[2.471, 3.616]
</td>
<td style="text-align:center;">
2.352
</td>
<td style="text-align:center;">
3.746
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_contiguity()
</td>
<td style="text-align:center;">
2.071
</td>
<td style="text-align:center;">
1.974
</td>
<td style="text-align:center;">
[1.778, 2.671]
</td>
<td style="text-align:center;">
1.762
</td>
<td style="text-align:center;">
2.853
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_capital_distance()
</td>
<td style="text-align:center;">
1.881
</td>
<td style="text-align:center;">
1.851
</td>
<td style="text-align:center;">
[1.623, 2.322]
</td>
<td style="text-align:center;">
1.549
</td>
<td style="text-align:center;">
2.484
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_wars(type=“inter”)
</td>
<td style="text-align:center;">
1.395
</td>
<td style="text-align:center;">
1.353
</td>
<td style="text-align:center;">
[1.19, 1.79]
</td>
<td style="text-align:center;">
1.188
</td>
<td style="text-align:center;">
2.119
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_trade()
</td>
<td style="text-align:center;">
1.025
</td>
<td style="text-align:center;">
0.954
</td>
<td style="text-align:center;">
[0.854, 1.36]
</td>
<td style="text-align:center;">
0.851
</td>
<td style="text-align:center;">
1.564
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_igos()
</td>
<td style="text-align:center;">
1.002
</td>
<td style="text-align:center;">
0.961
</td>
<td style="text-align:center;">
[0.874, 1.318]
</td>
<td style="text-align:center;">
0.871
</td>
<td style="text-align:center;">
1.561
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_minimum_distance() [CoW]
</td>
<td style="text-align:center;">
0.956
</td>
<td style="text-align:center;">
0.902
</td>
<td style="text-align:center;">
[0.787, 1.457]
</td>
<td style="text-align:center;">
0.772
</td>
<td style="text-align:center;">
1.620
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_minimum_distance() [G-W]
</td>
<td style="text-align:center;">
0.929
</td>
<td style="text-align:center;">
0.894
</td>
<td style="text-align:center;">
[0.795, 1.288]
</td>
<td style="text-align:center;">
0.792
</td>
<td style="text-align:center;">
1.406
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_gwcode_to_cow()
</td>
<td style="text-align:center;">
0.773
</td>
<td style="text-align:center;">
0.740
</td>
<td style="text-align:center;">
[0.671, 1.03]
</td>
<td style="text-align:center;">
0.648
</td>
<td style="text-align:center;">
1.135
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_atop_alliance()
</td>
<td style="text-align:center;">
0.634
</td>
<td style="text-align:center;">
0.571
</td>
<td style="text-align:center;">
[0.492, 0.933]
</td>
<td style="text-align:center;">
0.488
</td>
<td style="text-align:center;">
0.985
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_majors()
</td>
<td style="text-align:center;">
0.623
</td>
<td style="text-align:center;">
0.583
</td>
<td style="text-align:center;">
[0.514, 0.873]
</td>
<td style="text-align:center;">
0.503
</td>
<td style="text-align:center;">
1.156
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_nmc()
</td>
<td style="text-align:center;">
0.572
</td>
<td style="text-align:center;">
0.528
</td>
<td style="text-align:center;">
[0.458, 0.83]
</td>
<td style="text-align:center;">
0.451
</td>
<td style="text-align:center;">
0.961
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_sdp_gdp() [G-W]
</td>
<td style="text-align:center;">
0.521
</td>
<td style="text-align:center;">
0.478
</td>
<td style="text-align:center;">
[0.415, 0.853]
</td>
<td style="text-align:center;">
0.414
</td>
<td style="text-align:center;">
0.896
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_alliance()
</td>
<td style="text-align:center;">
0.515
</td>
<td style="text-align:center;">
0.462
</td>
<td style="text-align:center;">
[0.416, 0.787]
</td>
<td style="text-align:center;">
0.412
</td>
<td style="text-align:center;">
0.864
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_sdp_gdp() [CoW]
</td>
<td style="text-align:center;">
0.497
</td>
<td style="text-align:center;">
0.449
</td>
<td style="text-align:center;">
[0.412, 0.819]
</td>
<td style="text-align:center;">
0.402
</td>
<td style="text-align:center;">
0.997
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_democracy() [G-W]
</td>
<td style="text-align:center;">
0.444
</td>
<td style="text-align:center;">
0.408
</td>
<td style="text-align:center;">
[0.369, 0.737]
</td>
<td style="text-align:center;">
0.358
</td>
<td style="text-align:center;">
0.874
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_gml_mids(keep=NULL)
</td>
<td style="text-align:center;">
0.444
</td>
<td style="text-align:center;">
0.399
</td>
<td style="text-align:center;">
[0.345, 0.755]
</td>
<td style="text-align:center;">
0.336
</td>
<td style="text-align:center;">
0.908
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_democracy() [CoW]
</td>
<td style="text-align:center;">
0.443
</td>
<td style="text-align:center;">
0.411
</td>
<td style="text-align:center;">
[0.371, 0.638]
</td>
<td style="text-align:center;">
0.361
</td>
<td style="text-align:center;">
0.805
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_cow_mids(keep=NULL)
</td>
<td style="text-align:center;">
0.440
</td>
<td style="text-align:center;">
0.408
</td>
<td style="text-align:center;">
[0.359, 0.713]
</td>
<td style="text-align:center;">
0.346
</td>
<td style="text-align:center;">
0.863
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_strategic_rivalries()
</td>
<td style="text-align:center;">
0.418
</td>
<td style="text-align:center;">
0.382
</td>
<td style="text-align:center;">
[0.345, 0.739]
</td>
<td style="text-align:center;">
0.340
</td>
<td style="text-align:center;">
0.915
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_ccode_to_gw()
</td>
<td style="text-align:center;">
0.414
</td>
<td style="text-align:center;">
0.383
</td>
<td style="text-align:center;">
[0.348, 0.653]
</td>
<td style="text-align:center;">
0.342
</td>
<td style="text-align:center;">
0.762
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_rugged_terrain() [CoW]
</td>
<td style="text-align:center;">
0.402
</td>
<td style="text-align:center;">
0.360
</td>
<td style="text-align:center;">
[0.311, 0.736]
</td>
<td style="text-align:center;">
0.308
</td>
<td style="text-align:center;">
0.840
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
add_rugged_terrain() [G-W]
</td>
<td style="text-align:center;">
0.384
</td>
<td style="text-align:center;">
0.347
</td>
<td style="text-align:center;">
[0.306, 0.718]
</td>
<td style="text-align:center;">
0.301
</td>
<td style="text-align:center;">
0.734
</td>
</tr>
</tbody>
</table>
<!-- It may raise a curious eyebrow that the `add_cow_trade()` function takes over 20 seconds (on average) for dyad-year data. The explanation is simple, if a bit strange. The raw data for these are like over 10 MBs even in their compressed form. For context: CRAN only allows *5* MBs for *total* package size, barring an exception from CRAN (which it almost assuredly would not give me because this package is not that important in the broad R ecosystem). That means, if you stare closely at the code, you'll see the function *loads the data from my website* and then processes it further. It means the function will not work for dyad-year analyses if you don't have an active internet connection. It also means you'll want a stable internet connection. Part of these summaries may be a function of how spotty my wireless connection is in my living room (and how I was also streaming UEFA Euro 2020). If you think you have a more flexible solution here, feel free to reach out because this does kind of bug me (even as it's CRAN compliant, which is a high priority for me). --><p>Basically, <code><a href="../reference/add_peace_years.html">add_peace_years()</a></code> works <em>generally</em> with a variety of data types you feed it. It’s also implicitly a grouped function. For state-year data, that means you have about 217 “groups” (i.e. states) in the Correlates of War cases. If you want—as I do here—the full damn universe of Correlates of War dyads from 1816 to 2020, that means you’ll have 41,252 dyads for which <code><a href="../reference/add_peace_years.html">add_peace_years()</a></code> will calculate your peace spells. So yeah, that’s going to take some time. You can cut that in about half if you filtered the data to just politically relevant dyads before calculating peace years.</p>
<p>Ultimately, <a href="http://svmiller.com/peacesciencer/index.html">the examples on the README</a> show that you can do most things in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> in a matter of seconds. Unless you’re stress-testing the package’s ability to do everything on the full universe of dyad-year data, you can create the kind of data you want in well under a minute. Some functions take longer than others, mostly because of some hacks I built into these functions on the premise that I know they’ll work as I intend them to work (even if a more optimal alternative is possible).</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>My laptop is pretty good as far as performance laptops go. At the least, it has 16 GB of RAM. That is on the high end as far as most consumer laptops go, but dedicated professionals may have a laptop similar to what I have.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
