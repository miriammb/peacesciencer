<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Various Parlor Tricks in `{peacesciencer}` • peacesciencer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Various Parlor Tricks in `{peacesciencer}`">
<meta property="og:description" content="peacesciencer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peacesciencer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">What’s Included?</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/coerce-dispute-year-dyad-year.html">How `{peacesciencer}` Coerces Dispute-Year Data into Dyad-Year Data</a>
    </li>
    <li>
      <a href="../articles/democracy.html">Fixing Unnecessary Missingness in Democracy Scores in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/different-data-types.html">Create Different Kinds of Data in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/joins.html">A Discussion of Various Joins in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/parlor-tricks.html">Various Parlor Tricks in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/state-systems.html">A Discussion of the Two State Systems (CoW, G-W) in `{peacesciencer}`</a>
    </li>
    <li>
      <a href="../articles/versions.html">`{peacesciencer}` Data Versions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Manuscript
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../ms.html">HTML</a>
    </li>
    <li>
      <a href="../ms.pdf">PDF</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/svmiller/peacesciencer/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="parlor-tricks_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Various Parlor Tricks in <code>{peacesciencer}</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/svmiller/peacesciencer/blob/master/vignettes/parlor-tricks.Rmd"><code>vignettes/parlor-tricks.Rmd</code></a></small>
      <div class="hidden name"><code>parlor-tricks.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a></span><span class="op">)</span></code></pre></div>
<p>This is a running list of various parlor tricks that you can do with the data and functions in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>. Space and time considerations, along with some rigidity imposed by CRAN guidelines, preclude me from including these as outright functions or belaboring them in greater detail in the manuscript. Again, <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> can do a lot, but it can’t do everything. Yet, some of its functionality may not also be obvious from the manuscript or documentation files because they’re not necessarily core functions. Thus “parlor trick” is an appropriate descriptor here.</p>
<div id="create-a-new-state-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-new-state-variable" class="anchor"></a>Create a “New State” Variable</h2>
<p>The manuscript includes a partial replication of a state-year civil conflict analysis analogous to <a href="https://www.jstor.org/stable/3118222">Fearon and Laitin (2003)</a> and <a href="http://jpr.sagepub.com/content/51/5/634">Gibler and Miller (2014)</a>. Both of those analyses include a “new state” variable, arguing that states within the first two years of their existence are more likely to experience a civil war onset. The partial replication does not include this. This is because the easiest way to create this variable is through a <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> mutate based on the row number of the group, but <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> has the unfortunate side effect of erasing any other attributes in the data (i.e. the <code>ps_system</code> and <code>ps_type</code> attributes). This would break the <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> pipe. If you want this variable, I recommend creating and merging this variable after creating the bulk of the data.</p>
<p>Here’s how you’d do it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Hypothetical main data</span>
<span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">year</span>, <span class="fl">1946</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_ucdp_acd.html">add_ucdp_acd</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intrastate"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Data</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>

<span class="co"># Add in new state variable after the fact</span>
<span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>newstate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">Data</span>, <span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">:</span><span class="va">ucdponset</span>, <span class="va">newstate</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Data</span>
<span class="co">#&gt; Joining, by = c("gwcode", "statename", "year")</span>

<span class="co"># Proof of concept: Here's India</span>
<span class="va">Data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">750</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 73 × 9</span>
<span class="co">#&gt;    gwcode statename  year ucdpongoing ucdponset newstate maxintensity</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1    750 India      1947           0         0        1           NA</span>
<span class="co">#&gt;  2    750 India      1948           1         1        1            2</span>
<span class="co">#&gt;  3    750 India      1949           1         0        0            2</span>
<span class="co">#&gt;  4    750 India      1950           1         0        0            2</span>
<span class="co">#&gt;  5    750 India      1951           1         0        0            2</span>
<span class="co">#&gt;  6    750 India      1952           0         0        0           NA</span>
<span class="co">#&gt;  7    750 India      1953           0         0        0           NA</span>
<span class="co">#&gt;  8    750 India      1954           0         0        0           NA</span>
<span class="co">#&gt;  9    750 India      1955           0         0        0           NA</span>
<span class="co">#&gt; 10    750 India      1956           1         1        0            1</span>
<span class="co">#&gt; # … with 63 more rows, and 2 more variables: conflict_ids &lt;chr&gt;,</span>
<span class="co">#&gt; #   ucdpspell &lt;dbl&gt;</span>

<span class="co"># And here's Belize</span>
<span class="va">Data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">80</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 39 × 9</span>
<span class="co">#&gt;    gwcode statename  year ucdpongoing ucdponset newstate maxintensity</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1     80 Belize     1981           0         0        1           NA</span>
<span class="co">#&gt;  2     80 Belize     1982           0         0        1           NA</span>
<span class="co">#&gt;  3     80 Belize     1983           0         0        0           NA</span>
<span class="co">#&gt;  4     80 Belize     1984           0         0        0           NA</span>
<span class="co">#&gt;  5     80 Belize     1985           0         0        0           NA</span>
<span class="co">#&gt;  6     80 Belize     1986           0         0        0           NA</span>
<span class="co">#&gt;  7     80 Belize     1987           0         0        0           NA</span>
<span class="co">#&gt;  8     80 Belize     1988           0         0        0           NA</span>
<span class="co">#&gt;  9     80 Belize     1989           0         0        0           NA</span>
<span class="co">#&gt; 10     80 Belize     1990           0         0        0           NA</span>
<span class="co">#&gt; # … with 29 more rows, and 2 more variables: conflict_ids &lt;chr&gt;,</span>
<span class="co">#&gt; #   ucdpspell &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="code-capabilitiesdevelopmentmilitarization-as-bremer-1992-did" class="section level2">
<h2 class="hasAnchor">
<a href="#code-capabilitiesdevelopmentmilitarization-as-bremer-1992-did" class="anchor"></a>Code Capabilities/Development/Militarization as Bremer (1992) Did</h2>
<p>The manuscript includes a replication of <a href="https://journals.sagepub.com/doi/abs/10.1177/0022002792036002005">Bremer’s (1992) “dangerous dyads”</a> design, albeit one that leverages newer/better data sources that were unavailable to Bremer at the time. For convenience’s sake, the replication used other approaches to estimating Bremer’s variables, including the “weak-link” mechanisms that <a href="https://www.jstor.org/stable/2944879">Dixon (1994)</a> introduced in his seminal work on democratic conflict resolution. If the user wanted to recreate some of the covariates as Bremer (1992) did it, here would be how to do it.</p>
<p>The covariates in question concern information grabbed from the Correlates of War national material capabilities data set.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> For example, the user guide recreates the “relative power” variable as a proportion of the lower composite index of national capabilities (CINC) variable over the higher one. Bremer opts for a different approach, defining a “relative power” variable as a three-part ordinal category where the more powerful side has a CINC score that is 1) 10 times higher than the less powerful side, 2) three times higher than the other side, or 3) less than three times higher than the other side. Here is the exact passage on p. 322.</p>
<blockquote>
<p>Based on these CINC scores, I computed the larger-to-smaller capability ratios for all dyad-years and classified them into three groups. If the capability ratio was less than or equal to three, then the dyad was considered to constitute a case of small power difference. If the ratio was larger than 10, then the power difference was coded as large, whereas a ratio between 3 and 10 was coded as a medium power difference. If either of the CINC scores was missing (or equal to zero) for a ratio calculation, then the power difference score for that dyad was coded as missing also.</p>
</blockquote>
<p>This is an easy <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> function, but it also would’ve consumed space and words in a manuscript than the allocated journal space would allow. There’s added difficulty in making sure to identify which side in a non-directed dyad-year is more powerful.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cow_ddy</span> <span class="op">%&gt;%</span> <span class="co"># built-in data set for convenience</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ccode2</span> <span class="op">&gt;</span> <span class="va">ccode1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># make it non-directed</span>
  <span class="co"># add CINC scores</span>
  <span class="fu"><a href="../reference/add_nmc.html">add_nmc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># select just what we want</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">cinc1</span>, <span class="va">cinc2</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span>

<span class="va">Bremer</span> <span class="op">%&gt;%</span> 
  <span class="co"># create a three-item ordinal relative power category with values 2, 1, and 0</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>relpow <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,
    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>,
    <span class="co"># copy-paste, re-arrange</span>
    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,
    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span><span class="op">)</span><span class="op">~</span> <span class="fl">1</span>,
    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_real_</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">relpow_example</span>

<span class="co"># Let's inspect the output.</span>
<span class="va">relpow_example</span> <span class="op">%&gt;%</span> <span class="va">na.omit</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>whichside <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span>, <span class="st">"ccode1 &gt; ccode2"</span>, 
                            <span class="st">"ccode2 &gt;= ccode1"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">whichside</span>, <span class="va">relpow</span><span class="op">)</span>
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     ccode1   : double</span>
<span class="co">#&gt;     ccode2   : double</span>
<span class="co">#&gt;     year     : double</span>
<span class="co">#&gt;     cinc1    : double</span>
<span class="co">#&gt;     cinc2    : double</span>
<span class="co">#&gt;     relpow   : double</span>
<span class="co">#&gt;     whichside: character</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[6]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 122,887 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year cinc1 cinc2 relpow whichside      </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;          </span>
<span class="co">#&gt;  1      2    200  1892 0.173 0.173      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  2      2    200  1897 0.169 0.166      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  3      2    200  1898 0.197 0.157      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  4      2    200  1899 0.185 0.169      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  5      2    200  1900 0.188 0.178      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  6      2    200  1901 0.203 0.174      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  7      2    200  1902 0.208 0.161      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  8      2    200  1903 0.210 0.143      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  9      2    200  1904 0.205 0.135      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt; 10      2    200  1905 0.214 0.121      0 ccode1 &gt; ccode2</span>
<span class="co">#&gt; # … with 122,877 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # A tibble: 106,282 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year  cinc1   cinc2 relpow whichside      </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;          </span>
<span class="co">#&gt;  1      2     70  1831 0.0420 0.00945      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  2      2     70  1832 0.0445 0.00963      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  3      2     70  1833 0.0481 0.00958      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  4      2     70  1834 0.0478 0.00971      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  5      2     70  1835 0.0485 0.00980      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  6      2     70  1836 0.0510 0.00941      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  7      2     70  1837 0.0535 0.00975      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  8      2     70  1838 0.0533 0.00966      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  9      2     70  1839 0.0508 0.00948      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt; 10      2     70  1840 0.0495 0.00898      1 ccode1 &gt; ccode2</span>
<span class="co">#&gt; # … with 106,272 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; # A tibble: 181,735 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year cinc1   cinc2 relpow whichside      </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;          </span>
<span class="co">#&gt;  1      2     20  1920 0.290 0.0101       2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  2      2     20  1921 0.253 0.0105       2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  3      2     20  1922 0.256 0.00841      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  4      2     20  1923 0.272 0.00986      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  5      2     20  1924 0.254 0.00889      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  6      2     20  1925 0.254 0.00870      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  7      2     20  1926 0.263 0.00924      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  8      2     20  1927 0.239 0.00937      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt;  9      2     20  1928 0.240 0.00970      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt; 10      2     20  1929 0.240 0.00980      2 ccode1 &gt; ccode2</span>
<span class="co">#&gt; # … with 181,725 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; # A tibble: 130,447 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year  cinc1 cinc2 relpow whichside       </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">#&gt;  1      2    200  1861 0.144  0.258      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  2      2    200  1862 0.176  0.251      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  3      2    200  1863 0.179  0.251      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  4      2    200  1864 0.193  0.243      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  5      2    200  1865 0.135  0.256      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  6      2    200  1866 0.0982 0.248      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  7      2    200  1867 0.114  0.253      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  8      2    200  1868 0.107  0.253      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  9      2    200  1869 0.108  0.246      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; 10      2    200  1870 0.0990 0.242      0 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; # … with 130,437 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; # A tibble: 122,918 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year  cinc1 cinc2 relpow whichside       </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">#&gt;  1      2    200  1816 0.0397 0.337      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  2      2    200  1817 0.0358 0.328      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  3      2    200  1818 0.0361 0.329      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  4      2    200  1819 0.0371 0.317      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  5      2    200  1820 0.0371 0.317      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  6      2    200  1821 0.0342 0.317      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  7      2    200  1822 0.0329 0.311      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  8      2    200  1823 0.0331 0.318      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  9      2    200  1824 0.0330 0.330      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; 10      2    200  1825 0.0342 0.331      1 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; # … with 122,908 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[6]]</span>
<span class="co">#&gt; # A tibble: 216,172 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year   cinc1  cinc2 relpow whichside       </span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">#&gt;  1     20    200  1920 0.0101  0.128       2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  2     20    200  1922 0.00841 0.0945      2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  3     20    200  1923 0.00986 0.0990      2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  4     20    200  1924 0.00889 0.107       2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  5     20    200  1925 0.00870 0.0956      2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  6     20    200  1939 0.00909 0.0997      2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  7     20    255  1934 0.00891 0.0891      2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  8     20    255  1935 0.00874 0.103       2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt;  9     20    255  1936 0.00865 0.115       2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; 10     20    255  1937 0.00893 0.118       2 ccode2 &gt;= ccode1</span>
<span class="co">#&gt; # … with 216,162 more rows</span></code></pre></div>
<p>Next, the manuscript codes Bremer’s (1992) development/“advanced economies” measure using the weak-link of the lower GDP per capita in the dyad using <a href="https://academic.oup.com/isq/article-abstract/64/2/392/5824855">the simulations from Anders et al. (2020)</a>. In my defense, this is exactly the kind of data Bremer wishes he had available to him. He says so himself on footnote 26 on page 324.</p>
<blockquote>
<p>Under the most optimistic assumptions about data availability, I would estimate that the number of dyad-years for which the relevant data [GNP or GDP per capita] could be assembled would be less than 20% of the total dyad-years under consideration. A more realistic estimate might be as low as 10%. Clearly, our ability to test a generalization when 80% to 90% of the needed data are missing is very limited, and especially so in this case, because the missing data would be concentrated heavily in the pre-World War II era and less advanced states.</p>
</blockquote>
<p>Given this limitation, Bremer uses this approach to coding the development/“advanced economies” measure.</p>
<blockquote>
<p>A more economically advanced state should be characterized by possessing a share of system-wide economic capability that is greater than its share of system-wide demographic capability. Hence, in years when this was found to be true, I classified a state as more advanced; otherwise, less advanced. The next step involved examining each pair of states in each year and assigning it to one of three groups: both more advanced (7,160 dyad-years), one more advanced (61,823 dyad-years), and both less advanced (128,939 dyad-years).</p>
</blockquote>
<p>Replicating this approach is going to require group-by summaries of the raw national material capabilities data, which is outside of <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a>’s core functionality. Bremer’s wording here is a little vague; he doesn’t explain what variable, or variables, comprise “economic capability” and “demographic capability.” Let’s assume that “demographic capability” is just the total population variable whereas the “economic capability” variable<em>s</em> include iron and steel production and primary energy consumption. The variable would look something like this.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cow_nmc</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># calculate year proportions</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_tpop <span class="op">=</span> <span class="va">tpop</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">tpop</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
         prop_irst <span class="op">=</span> <span class="va">irst</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">irst</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
         prop_pec <span class="op">=</span> <span class="va">pec</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">pec</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># standardize an "economic capability" measure</span>
  <span class="co"># then make an advanced dummy</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>econcap <span class="op">=</span> <span class="op">(</span><span class="va">prop_irst</span> <span class="op">+</span> <span class="va">prop_pec</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span>,
         advanced <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">econcap</span> <span class="op">&gt;</span> <span class="va">prop_tpop</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">prop_tpop</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Advanced</span>

<span class="va">Advanced</span>
<span class="co">#&gt; # A tibble: 15,171 × 7</span>
<span class="co">#&gt;    ccode  year prop_tpop prop_irst prop_pec econcap advanced</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1     2  1816    0.0398    0.0954  0.00966  0.0525        1</span>
<span class="co">#&gt;  2     2  1817    0.0404    0.0938  0.0103   0.0520        1</span>
<span class="co">#&gt;  3     2  1818    0.0411    0.102   0.0110   0.0564        1</span>
<span class="co">#&gt;  4     2  1819    0.0416    0.101   0.0104   0.0555        1</span>
<span class="co">#&gt;  5     2  1820    0.0422    0.113   0.0105   0.0617        1</span>
<span class="co">#&gt;  6     2  1821    0.0430    0.0927  0.0108   0.0518        1</span>
<span class="co">#&gt;  7     2  1822    0.0431    0.0950  0.0109   0.0530        1</span>
<span class="co">#&gt;  8     2  1823    0.0439    0.0933  0.0111   0.0522        1</span>
<span class="co">#&gt;  9     2  1824    0.0447    0.0861  0.0122   0.0491        1</span>
<span class="co">#&gt; 10     2  1825    0.0453    0.0891  0.0129   0.0510        1</span>
<span class="co">#&gt; # … with 15,161 more rows</span></code></pre></div>
<p>Now, let’s merge this into the <code>Bremer</code> data frame we created. I’ll make this an ordinal variable as well with the same 2, 1, 0 ordering scheme.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Bremer</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Advanced</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">advanced</span><span class="op">)</span> <span class="op">%&gt;%</span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>ccode1 <span class="op">=</span> <span class="va">ccode</span>, advanced1 <span class="op">=</span> <span class="va">advanced</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Advanced</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">advanced</span><span class="op">)</span> <span class="op">%&gt;%</span> 
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>ccode2 <span class="op">=</span> <span class="va">ccode</span>, advanced2 <span class="op">=</span> <span class="va">advanced</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>advancedcat <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="va">advanced1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="fl">2</span>,
    <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="fl">0</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span>
<span class="co">#&gt; Joining, by = c("ccode1", "year")</span>
<span class="co">#&gt; Joining, by = c("ccode2", "year")</span>

<span class="co"># Let's inspect the output</span>
<span class="va">Bremer</span> <span class="op">%&gt;%</span> <span class="va">na.omit</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">advancedcat</span><span class="op">)</span> 
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     ccode1     : double</span>
<span class="co">#&gt;     ccode2     : double</span>
<span class="co">#&gt;     year       : double</span>
<span class="co">#&gt;     cinc1      : double</span>
<span class="co">#&gt;     cinc2      : double</span>
<span class="co">#&gt;     advanced1  : double</span>
<span class="co">#&gt;     advanced2  : double</span>
<span class="co">#&gt;     advancedcat: double</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[3]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 492,967 × 8</span>
<span class="co">#&gt;    ccode1 ccode2  year     cinc1   cinc2 advanced1 advanced2 advancedcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1     31     40  1986 0.0000349 0.00326         0         0           0</span>
<span class="co">#&gt;  2     31     40  1987 0.0000349 0.00328         0         0           0</span>
<span class="co">#&gt;  3     31     40  1988 0.000046  0.00334         0         0           0</span>
<span class="co">#&gt;  4     31     40  1989 0.0000584 0.00335         0         0           0</span>
<span class="co">#&gt;  5     31     40  1990 0.0000511 0.00324         0         0           0</span>
<span class="co">#&gt;  6     31     40  1991 0.0000432 0.00330         0         0           0</span>
<span class="co">#&gt;  7     31     40  1992 0.0000444 0.00278         0         0           0</span>
<span class="co">#&gt;  8     31     40  1993 0.0000479 0.00272         0         0           0</span>
<span class="co">#&gt;  9     31     40  1994 0.0000365 0.00204         0         0           0</span>
<span class="co">#&gt; 10     31     40  1995 0.0000355 0.00161         0         0           0</span>
<span class="co">#&gt; # … with 492,957 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # A tibble: 315,588 × 8</span>
<span class="co">#&gt;    ccode1 ccode2  year cinc1     cinc2 advanced1 advanced2 advancedcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     31  1986 0.135 0.0000349         1         0           1</span>
<span class="co">#&gt;  2      2     31  1987 0.134 0.0000349         1         0           1</span>
<span class="co">#&gt;  3      2     31  1988 0.134 0.000046          1         0           1</span>
<span class="co">#&gt;  4      2     31  1989 0.148 0.0000584         1         0           1</span>
<span class="co">#&gt;  5      2     31  1990 0.141 0.0000511         1         0           1</span>
<span class="co">#&gt;  6      2     31  1991 0.137 0.0000432         1         0           1</span>
<span class="co">#&gt;  7      2     31  1992 0.148 0.0000444         1         0           1</span>
<span class="co">#&gt;  8      2     31  1993 0.154 0.0000479         1         0           1</span>
<span class="co">#&gt;  9      2     31  1994 0.146 0.0000365         1         0           1</span>
<span class="co">#&gt; 10      2     31  1995 0.140 0.0000355         1         0           1</span>
<span class="co">#&gt; # … with 315,578 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; # A tibble: 50,500 × 8</span>
<span class="co">#&gt;    ccode1 ccode2  year cinc1   cinc2 advanced1 advanced2 advancedcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     20  1920 0.290 0.0101          1         1           2</span>
<span class="co">#&gt;  2      2     20  1921 0.253 0.0105          1         1           2</span>
<span class="co">#&gt;  3      2     20  1922 0.256 0.00841         1         1           2</span>
<span class="co">#&gt;  4      2     20  1923 0.272 0.00986         1         1           2</span>
<span class="co">#&gt;  5      2     20  1924 0.254 0.00889         1         1           2</span>
<span class="co">#&gt;  6      2     20  1925 0.254 0.00870         1         1           2</span>
<span class="co">#&gt;  7      2     20  1926 0.263 0.00924         1         1           2</span>
<span class="co">#&gt;  8      2     20  1927 0.239 0.00937         1         1           2</span>
<span class="co">#&gt;  9      2     20  1928 0.240 0.00970         1         1           2</span>
<span class="co">#&gt; 10      2     20  1929 0.240 0.00980         1         1           2</span>
<span class="co">#&gt; # … with 50,490 more rows</span></code></pre></div>
<p>Finally, the manuscript creates a militarization measure that is a weak-link that uses the data on military personnel and total population. Bremer opts for an approach similar to the development indicator he uses.</p>
<blockquote>
<p>Instead, I relied on the material capabilities data set discussed above, and classified a state as more militarized if its share of system-wide military capabilities was greater than its share of system-wide demographic capabilities. I classified it less militarized if this was not true. The classification of each dyad-year was then based on whether both, one, or neither of the two states making up the dyad were more militarized in that year.</p>
</blockquote>
<p>It reads like this is what he’s doing, while again reiterating that I’m assuming he’s using just the total population variable to measure “demographic capability.”</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cow_nmc</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># calculate year proportions</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop_tpop <span class="op">=</span> <span class="va">tpop</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">tpop</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
         prop_milex <span class="op">=</span> <span class="va">milex</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">milex</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,
         prop_milper <span class="op">=</span> <span class="va">milper</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">milper</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># standardize a "military capability" measure</span>
  <span class="co"># then make an advanced dummy</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>militcap <span class="op">=</span> <span class="op">(</span><span class="va">prop_milper</span> <span class="op">+</span> <span class="va">prop_milex</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span>,
         militarized <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">militcap</span> <span class="op">&gt;</span> <span class="va">prop_tpop</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">prop_tpop</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Militarized</span>

<span class="va">Militarized</span>
<span class="co">#&gt; # A tibble: 15,171 × 7</span>
<span class="co">#&gt;    ccode  year prop_tpop prop_milex prop_milper militcap militarized</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1     2  1816    0.0398     0.0682     0.00859   0.0384           0</span>
<span class="co">#&gt;  2     2  1817    0.0404     0.0451     0.00827   0.0267           0</span>
<span class="co">#&gt;  3     2  1818    0.0411     0.0370     0.00832   0.0227           0</span>
<span class="co">#&gt;  4     2  1819    0.0416     0.0449     0.00709   0.0260           0</span>
<span class="co">#&gt;  5     2  1820    0.0422     0.0310     0.00733   0.0192           0</span>
<span class="co">#&gt;  6     2  1821    0.0430     0.0345     0.00486   0.0197           0</span>
<span class="co">#&gt;  7     2  1822    0.0431     0.0249     0.00417   0.0146           0</span>
<span class="co">#&gt;  8     2  1823    0.0439     0.0249     0.00534   0.0151           0</span>
<span class="co">#&gt;  9     2  1824    0.0447     0.0295     0.00474   0.0171           0</span>
<span class="co">#&gt; 10     2  1825    0.0453     0.0321     0.00511   0.0186           0</span>
<span class="co">#&gt; # … with 15,161 more rows</span></code></pre></div>
<p>Let’s merge this into the <code>Bremer</code> data we created and inspect the output.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Bremer</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Militarized</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">militarized</span><span class="op">)</span> <span class="op">%&gt;%</span> 
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>ccode1 <span class="op">=</span> <span class="va">ccode</span>, militarized1 <span class="op">=</span> <span class="va">militarized</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Militarized</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">militarized</span><span class="op">)</span> <span class="op">%&gt;%</span> 
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>ccode2 <span class="op">=</span> <span class="va">ccode</span>, militarized2 <span class="op">=</span> <span class="va">militarized</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>militcat <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
    <span class="va">militarized1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="fl">2</span>,
    <span class="op">(</span><span class="va">militarized1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|</span> 
      <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="va">militarized1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="fl">0</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span>
<span class="co">#&gt; Joining, by = c("ccode1", "year")</span>
<span class="co">#&gt; Joining, by = c("ccode2", "year")</span>

<span class="va">Bremer</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">militarized1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="va">na.omit</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html">group_split</a></span><span class="op">(</span><span class="va">militcat</span><span class="op">)</span> 
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     ccode1      : double</span>
<span class="co">#&gt;     ccode2      : double</span>
<span class="co">#&gt;     year        : double</span>
<span class="co">#&gt;     militarized1: double</span>
<span class="co">#&gt;     militarized2: double</span>
<span class="co">#&gt;     militcat    : double</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[3]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 285,667 × 6</span>
<span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     20  1923            0            0        0</span>
<span class="co">#&gt;  2      2     20  1925            0            0        0</span>
<span class="co">#&gt;  3      2     20  1926            0            0        0</span>
<span class="co">#&gt;  4      2     20  1927            0            0        0</span>
<span class="co">#&gt;  5      2     20  1928            0            0        0</span>
<span class="co">#&gt;  6      2     20  1929            0            0        0</span>
<span class="co">#&gt;  7      2     20  1930            0            0        0</span>
<span class="co">#&gt;  8      2     20  1931            0            0        0</span>
<span class="co">#&gt;  9      2     20  1932            0            0        0</span>
<span class="co">#&gt; 10      2     20  1933            0            0        0</span>
<span class="co">#&gt; # … with 285,657 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # A tibble: 316,008 × 6</span>
<span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     20  1920            1            0        1</span>
<span class="co">#&gt;  2      2     20  1921            1            0        1</span>
<span class="co">#&gt;  3      2     20  1922            1            0        1</span>
<span class="co">#&gt;  4      2     20  1924            1            0        1</span>
<span class="co">#&gt;  5      2     20  1947            1            0        1</span>
<span class="co">#&gt;  6      2     20  1948            1            0        1</span>
<span class="co">#&gt;  7      2     20  1949            1            0        1</span>
<span class="co">#&gt;  8      2     20  1950            1            0        1</span>
<span class="co">#&gt;  9      2     20  1971            1            0        1</span>
<span class="co">#&gt; 10      2     20  1973            1            0        1</span>
<span class="co">#&gt; # … with 315,998 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; # A tibble: 104,554 × 6</span>
<span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     20  1942            1            1        2</span>
<span class="co">#&gt;  2      2     20  1943            1            1        2</span>
<span class="co">#&gt;  3      2     20  1944            1            1        2</span>
<span class="co">#&gt;  4      2     20  1945            1            1        2</span>
<span class="co">#&gt;  5      2     20  1946            1            1        2</span>
<span class="co">#&gt;  6      2     20  1951            1            1        2</span>
<span class="co">#&gt;  7      2     20  1952            1            1        2</span>
<span class="co">#&gt;  8      2     20  1953            1            1        2</span>
<span class="co">#&gt;  9      2     20  1954            1            1        2</span>
<span class="co">#&gt; 10      2     20  1955            1            1        2</span>
<span class="co">#&gt; # … with 104,544 more rows</span></code></pre></div>
<p>If we wanted to perfectly recreate the data as Bremer (1992) did it almost 30 years ago, here’s how you’d do it in <a href="https://github.com/svmiller/peacesciencer/">peacesciencer</a> (albeit with newer data). Still, I think the data innovations that have followed Bremer (1992) merit the approach employed in the manuscript.</p>
</div>
<div id="get-multiple-peace-years-in-one-fell-swoop" class="section level2">
<h2 class="hasAnchor">
<a href="#get-multiple-peace-years-in-one-fell-swoop" class="anchor"></a>Get Multiple Peace Years in One Fell Swoop</h2>
<p><code><a href="../reference/add_peace_years.html">add_peace_years()</a></code> is designed to work generally, based on the other data/functions included in the package. For example, assume you wanted to a dyad-year analysis comparing the Correlates of War (CoW) Militarized Interstate Dispute (MID) with the Gibler-Miller-Little conflict data. Just add both in the pipe and ask for peace-years.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cow_ddy</span> <span class="op">%&gt;%</span>
  <span class="co"># non-directed, politically relevant, for convenience</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ccode2</span> <span class="op">&gt;</span> <span class="va">ccode1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/filter_prd.html">filter_prd</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_cow_mids.html">add_cow_mids</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_gml_mids.html">add_gml_mids</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">NDY</span>
<span class="co">#&gt; Joining, by = c("ccode1", "ccode2", "year")</span>
<span class="co">#&gt; Joining, by = c("ccode1", "ccode2", "year")</span>
<span class="co">#&gt; add_cow_mids() IMPORTANT MESSAGE: By default, this function whittles dispute-year data into dyad-year data by first selecting on unique onsets. Thereafter, where duplicates remain, it whittles dispute-year data into dyad-year data in the following order: 1) retaining highest `fatality`, 2) retaining highest `hostlev`, 3) retaining highest estimated `mindur`, 4) retaining highest estimated `maxdur`, 5) retaining reciprocated over non-reciprocated observations, 6) retaining the observation with the lowest start month, and, where duplicates still remained (and they don't), 7) forcibly dropping all duplicates for observations that are otherwise very similar.</span>
<span class="co">#&gt; See: http://svmiller.com/peacesciencer/articles/coerce-dispute-year-dyad-year.html</span>
<span class="co">#&gt; Dyadic data are non-directed and initiation variables make no sense in this context.</span>
<span class="co">#&gt; Joining, by = c("ccode1", "ccode2", "year")</span>
<span class="co">#&gt; add_gml_mids() IMPORTANT MESSAGE: By default, this function whittles dispute-year data into dyad-year data by first selecting on unique onsets. Thereafter, where duplicates remain, it whittles dispute-year data into dyad-year data in the following order: 1) retaining highest `fatality`, 2) retaining highest `hostlev`, 3) retaining highest estimated `mindur`, 4) retaining highest estimated `maxdur`, 5) retaining reciprocated over non-reciprocated observations, 6) retaining the observation with the lowest start month, and, where duplicates still remained (and they don't), 7) forcibly dropping all duplicates for observations that are otherwise very similar.</span>
<span class="co">#&gt; See: http://svmiller.com/peacesciencer/articles/coerce-dispute-year-dyad-year.html</span>
<span class="co">#&gt; Joining, by = c("year", "dyad")</span>
<span class="co">#&gt; Joining, by = c("year", "dyad")</span>

<span class="co"># Here's a snapshot of U.S-Cuba from 1980-89 for illustration sake.</span>
<span class="va">NDY</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ccode1</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;</span> <span class="va">ccode2</span> <span class="op">==</span> <span class="fl">40</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">cowmidongoing</span>, <span class="va">gmlmidongoing</span>, <span class="va">cowmidspell</span><span class="op">:</span><span class="va">gmlmidspell</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">1980</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 37 × 7</span>
<span class="co">#&gt;    ccode1 ccode2  year cowmidongoing gmlmidongoing cowmidspell gmlmidspell</span>
<span class="co">#&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1      2     40  1980             0             0           0           0</span>
<span class="co">#&gt;  2      2     40  1981             1             1           1           1</span>
<span class="co">#&gt;  3      2     40  1982             0             0           0           0</span>
<span class="co">#&gt;  4      2     40  1983             1             1           1           1</span>
<span class="co">#&gt;  5      2     40  1984             0             0           0           0</span>
<span class="co">#&gt;  6      2     40  1985             0             0           1           1</span>
<span class="co">#&gt;  7      2     40  1986             0             1           2           2</span>
<span class="co">#&gt;  8      2     40  1987             1             1           3           0</span>
<span class="co">#&gt;  9      2     40  1988             0             0           0           0</span>
<span class="co">#&gt; 10      2     40  1989             0             0           1           1</span>
<span class="co">#&gt; # … with 27 more rows</span></code></pre></div>
<p>You can do this with state-year data as well. For example, you can compare how CoW and UCDP code civil wars differently since 1946. Do note, however, that <a href="http://svmiller.com/peacesciencer/articles/state-systems.html">the nature of different state systems used in these data sets</a> means we’ll treat one as a master and merge other codes into it.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span><span class="op">(</span><span class="va">year</span>, <span class="fl">1946</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_ccode_to_gw.html">add_ccode_to_gw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_ucdp_acd.html">add_ucdp_acd</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intrastate"</span>, only_wars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_cow_wars.html">add_cow_wars</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intra"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># select just a few things</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gwcode</span>, <span class="va">ccode</span>, <span class="va">year</span>, <span class="va">statename</span>, <span class="va">ucdpongoing</span>, <span class="va">ucdponset</span>,
         <span class="va">cowintraongoing</span>, <span class="va">cowintraonset</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">:</span><span class="va">statename</span>, <span class="va">ucdpspell</span>, <span class="va">cowintraspell</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># India is illustrative of how the two differ.</span>
  <span class="co"># UCDP has an intra-state conflict to the level of war early </span>
  <span class="co">#  into its existence. CoW does not.</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">750</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>
<span class="co">#&gt; Joining, by = c("year", "ccode")</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>
<span class="co">#&gt; Joining, by = c("ccode", "year")</span>
<span class="co">#&gt; # A tibble: 73 × 10</span>
<span class="co">#&gt;    gwcode ccode  year statename ucdpspell cowintraspell ucdpongoing ucdponset</span>
<span class="co">#&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1    750   750  1947 India             0             0           0         0</span>
<span class="co">#&gt;  2    750   750  1948 India             1             1           1         1</span>
<span class="co">#&gt;  3    750   750  1949 India             0             2           1         0</span>
<span class="co">#&gt;  4    750   750  1950 India             0             3           1         0</span>
<span class="co">#&gt;  5    750   750  1951 India             0             4           1         0</span>
<span class="co">#&gt;  6    750   750  1952 India             0             5           0         0</span>
<span class="co">#&gt;  7    750   750  1953 India             1             6           0         0</span>
<span class="co">#&gt;  8    750   750  1954 India             2             7           0         0</span>
<span class="co">#&gt;  9    750   750  1955 India             3             8           0         0</span>
<span class="co">#&gt; 10    750   750  1956 India             4             9           0         0</span>
<span class="co">#&gt; # … with 63 more rows, and 2 more variables: cowintraongoing &lt;dbl&gt;,</span>
<span class="co">#&gt; #   cowintraonset &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="measure-leader-tenure-in-days" class="section level2">
<h2 class="hasAnchor">
<a href="#measure-leader-tenure-in-days" class="anchor"></a>Measure Leader Tenure in Days</h2>
<p><code><a href="../reference/create_leaderyears.html">create_leaderyears()</a></code>, by default, returns an estimate of leader-tenure as the unique calendar year for the leader. I think of this is a reasonable thing to include, and benchmarking to years is doing some internal lifting elsewhere in the function that generates leader-year data from leader-day data in Archigos. However, it can lead some peculiar observations that may not square with how we knee-jerk think about leader tenure.</p>
<p>I will illustrate what I mean by this with the case of Jimmy Carter from leader-year data standardized to Correlates of War state system membership.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">leader_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_leaderyears.html">create_leaderyears</a></span><span class="op">(</span>standardize <span class="op">=</span> <span class="st">'cow'</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = c("gwcode", "year")</span>
<span class="co">#&gt; Joining, by = c("ccode", "date")</span>

<span class="va">leader_years</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">obsid</span> <span class="op">==</span> <span class="st">"USA-1977"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 × 7</span>
<span class="co">#&gt;   obsid    ccode leader gender  year yrinoffice leaderage</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 USA-1977     2 Carter M       1977          1        53</span>
<span class="co">#&gt; 2 USA-1977     2 Carter M       1978          2        54</span>
<span class="co">#&gt; 3 USA-1977     2 Carter M       1979          3        55</span>
<span class="co">#&gt; 4 USA-1977     2 Carter M       1980          4        56</span>
<span class="co">#&gt; 5 USA-1977     2 Carter M       1981          5        57</span></code></pre></div>
<p>Jimmy Carter took office in January 1977 (year 1) and had a tenure through 1978 (year 2), 1979 (year 3), 1980 (year 4), and exited office in January 1981 (year 5). We know presidents in the American context have four-year terms. This output suggests five years.</p>
<p>If this is that problematic for the research design, especially one that may be interested in what happens to leader behavior after a certain amount of time in office, a user can do something like generate estimates of leader tenure in a given year to the day. Basically, once the core leader-year are generated, the user can use the <code><a href="../reference/create_leaderdays.html">create_leaderdays()</a></code> function and summarize leader tenure in the year as the minimum number of days the leader was in office in the year and the maximum number of days the leader was in office in the year.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># don't standardize the leader-days for this use, just to be safe.</span>
<span class="fu"><a href="../reference/create_leaderdays.html">create_leaderdays</a></span><span class="op">(</span>standardize <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co"># extract year from date</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># group by leader</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">obsid</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># count days in office, for leader tenure</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>daysinoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># group-by leader and year</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">obsid</span>, <span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># how long was the minimum (maximum) days in office for the leader in the year?</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>min_daysoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">daysinoffice</span><span class="op">)</span>,
            max_dayoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">daysinoffice</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co">#practice safe group-by, and assign to object</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">leader_tenures</span>
<span class="co">#&gt; `summarise()` has grouped output by 'obsid'. You can override using the `.groups` argument.</span>

<span class="co"># add this information to our data</span>
<span class="va">leader_years</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">leader_tenures</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">leader_years</span>
<span class="co">#&gt; Joining, by = c("obsid", "year")</span></code></pre></div>
<p>Here’s what this would look like in the case of Jimmy Carter.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">leader_years</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">obsid</span> <span class="op">==</span> <span class="st">"USA-1977"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 × 9</span>
<span class="co">#&gt;   obsid    ccode leader gender  year yrinoffice leaderage min_daysoffice</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;          &lt;int&gt;</span>
<span class="co">#&gt; 1 USA-1977     2 Carter M       1977          1        53              1</span>
<span class="co">#&gt; 2 USA-1977     2 Carter M       1978          2        54            347</span>
<span class="co">#&gt; 3 USA-1977     2 Carter M       1979          3        55            712</span>
<span class="co">#&gt; 4 USA-1977     2 Carter M       1980          4        56           1077</span>
<span class="co">#&gt; 5 USA-1977     2 Carter M       1981          5        57           1443</span>
<span class="co">#&gt; # … with 1 more variable: max_dayoffice &lt;int&gt;</span></code></pre></div>
<p>This measure might be more useful. Basically, Jimmy Carter was a new leader in 1977 (<code>min_daysoffice = 1</code>). By 1978, he had almost a year under his belt (i.e. Jan. 1, 1978 was his 347th day in office). By time he left office in 1981, he had completed 1,462 days on the job.</p>
<p><code><a href="../reference/create_leaderyears.html">create_leaderyears()</a></code> elects to not create this information for the user. No matter, it does not take much effort for the user to create it if this is the kind of information they wanted.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Bremer has a different way of coding democracy (i.e. using a value of 5 or greater on the democracy scale in Polity), but this is so far removed from current practice that it’s inadvisable to replicate. If you want to use the Polity data (using <code><a href="../reference/add_democracy.html">add_democracy()</a></code> in this package), use the <code>polity2</code> variable that adds the autocracy and democracy indices together. Therein, use the weak-link specification <em>and</em> the distance between the more democratic and less democratic state.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
